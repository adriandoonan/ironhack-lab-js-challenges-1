<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .game-board{ 
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr  ;
            grid-template-rows: 100px 100px 100px 100px 100px 100px 100px 100px 100px 100px 100px 100px 100px;
;
            justify-content: center;
        }
        .box {
            background-color: blue;
            border: 1px solid white;
            transition: color;
        }
        .targeted {
            background-color: red;
        }
    </style>
    <script>
        function sleep(milliseconds) {
            const date = Date.now();
            let currentDate = null;
            do {
                currentDate = Date.now();
            } while (currentDate - date < milliseconds);
            }
        const allBoxes = document.querySelectorAll('.box')
        const nineSiglesMatrix = [ 
  [  1,  1,  1,  1,  1,  1,  1,  1,  2], //0
  [  1,  1,  1,  1,  1,  1,  1,  2,  1], //1
  [  1,  1,  1,  1,  1,  1,  1,  1,  1], //2
  [  1,  1,  1,  1,  1,  1,  1,  1,  1], //3
  [  1,  1,  1,  1,  1,  1,  1,  1,  1], //4
  [  1,  1,  1,  1,  1,  1,  1,  1,  1], //5
  [  1,  1,  1,  1,  1,  1,  1,  1,  1], //6
  [  1,  2,  1,  1,  1,  1,  1,  1,  1], //7
  [  1,  1,  1,  1,  1,  1,  1,  1,  1]  //8
]
        const greatestProduct2 = (aMatrix) => {

  let actualLoops = 0

  let biggestProduct = 0

  const product = (...nums) => [...nums].reduce((a,b) => a * b)
  
  const randomColor = () =>Math.floor(Math.random()*16777215).toString(16);

  //console.log(product(2,1,2,3,4))
  for (let remainingLoops = aMatrix.length ** 2,row = 0,column = 0,runs = 1, op = false; remainingLoops>0; remainingLoops--,runs++,op = false) {
    if (runs === 1) console.log('remaining loops',remainingLoops)
    console.log('\n\nrun: ', runs)
    
   if (column < aMatrix.length - 3) {
      console.log('could go horizontal\nx,y:',row,column,aMatrix[row][column]);
      actualLoops++
      op = true
      const horizontal = product(aMatrix[row][column],aMatrix[row][column+1],aMatrix[row][column+2],aMatrix[row][column+3])
      console.log('horizontal',horizontal)
      if (horizontal > biggestProduct) biggestProduct = horizontal;
      const targets = [`box-${row}${column}`,`box-${row}${column+1}`,`box-${row}${column+2}`,`box-${row}${column+3}`]
      console.log('targets',targets)
      targets.map(element => {
        //sleep(100)
       document.querySelector(`#${element}`).style.backgroundColor = "red";
       
      })
    }
    
    if (row < aMatrix.length - 3) {
      console.log('could go vertical\nx,y:',row,column,aMatrix[row][column]);
      actualLoops++
      op = true
      const vertical = product(aMatrix[row][column],aMatrix[row+1][column],aMatrix[row+2][column],aMatrix[row+3][column])
      console.log('vertical',vertical)
      if (vertical > biggestProduct) biggestProduct = vertical;
      const targets = [`box-${row}${column}`,`box-${row+1}${column}`,`box-${row+2}${column}`,`box-${row+3}${column}`]
      console.log('targets',targets)
      targets.map(element => {
        //sleep(100)
        document.querySelector(`#${element}`).style.backgroundColor = "green";
        
      })
    }

    if (column < aMatrix.length - 3 && row < aMatrix.length - 3) {
      console.log('could go down, right and cross\nx,y:',row,column,aMatrix[row][column]);
      actualLoops++
      op = true
      //console.log('targets',aMatrix[row][column],aMatrix[row+1][column+1],aMatrix[row+2][column+2],aMatrix[row+3][column+3])
      const downAndRight = product(aMatrix[row][column],aMatrix[row+1][column+1],aMatrix[row+2][column+2],aMatrix[row+3][column+3])
      console.log('downAndRight',downAndRight)
      if (downAndRight > biggestProduct) biggestProduct = downAndRight;
      const targets = [`box-${row}${column}`,`box-${row+1}${column+1}`,`box-${row+2}${column+2}`,`box-${row+3}${column+3}`]
      console.log('targets',targets)
      targets.map(element => {
       //sleep(100)
        document.querySelector(`#${element}`).style.backgroundColor = "darkgrey";
       
      })
    
    if (row >= 3 && column < aMatrix.length - 3) {
      console.log('could go up, right and cross\nx,y:',row,column,aMatrix[row][column]);
      actualLoops++
      op = true
      //console.log('targets',aMatrix[row][column],aMatrix[row-1][column+1],aMatrix[row-2][column+2],aMatrix[row-3][column+3])
      const upAndRight = product(aMatrix[row][column],aMatrix[row-1][column+1],aMatrix[row-2][column+2],aMatrix[row-3][column+3])
      console.log('upAndRight',upAndRight)
      if (upAndRight > biggestProduct) biggestProduct = upAndRight;
      const targets = [`box-${row}${column}`,`box-${row-1}${column+1}`,`box-${row-2}${column+2}`,`box-${row-3}${column+3}`]
      console.log('targets',targets)
      targets.map(element => {
        //sleep(100)
       document.querySelector(`#${element}`).style.backgroundColor = "black";
       
      })
    }
    

    }
    if (!op) {
      console.log('can do nothing\nx,y:',row,column,aMatrix[row][column]);
    }
    //runs % aMatrix.length === 0 ? console.log('should reset on run',runs,runs % aMatrix.length,'remaining loops',remainingLoops) : console.log('did nothing on run', runs,runs % aMatrix.length)
    if (runs > 1 && runs % aMatrix.length === 0) {
      console.log('\nmodulo on run '+ actualLoops + ' remaining ' + remainingLoops + ' length ' + aMatrix.length)
      row = row + 1;
      column = 0}
    else column = column + 1
    
   
  }

  console.log('\nactual loops',actualLoops)

  return biggestProduct
  
}
greatestProduct2
    </script>
</head>
<body>

    <div class = "game-board">
        <div class="box" id="box-00"></div>
        <div class="box" id="box-01"></div>
        <div class="box" id="box-02"></div>
        <div class="box" id="box-03"></div>
        <div class="box" id="box-04"></div>
        <div class="box" id="box-05"></div>
        <div class="box" id="box-06"></div>
        <div class="box" id="box-07"></div>
        <div class="box" id="box-08"></div>
        <div class="box" id="box-10"></div>
        <div class="box" id="box-11"></div>
        <div class="box" id="box-12"></div>
        <div class="box" id="box-13"></div>
        <div class="box" id="box-14"></div>
        <div class="box" id="box-15"></div>
        <div class="box" id="box-16"></div>
        <div class="box" id="box-17"></div>
        <div class="box" id="box-18"></div>
        <div class="box" id="box-20"></div>
        <div class="box" id="box-21"></div>
        <div class="box" id="box-22"></div>
        <div class="box" id="box-23"></div>
        <div class="box" id="box-24"></div>
        <div class="box" id="box-25"></div>
        <div class="box" id="box-26"></div>
        <div class="box" id="box-27"></div>
        <div class="box" id="box-28"></div>
        <div class="box" id="box-30"></div>
        <div class="box" id="box-31"></div>
        <div class="box" id="box-32"></div>
        <div class="box" id="box-33"></div>
        <div class="box" id="box-34"></div>
        <div class="box" id="box-35"></div>
        <div class="box" id="box-36"></div>
        <div class="box" id="box-37"></div>
        <div class="box" id="box-38"></div>
        <div class="box" id="box-40"></div>
        <div class="box" id="box-41"></div>
        <div class="box" id="box-42"></div>
        <div class="box" id="box-43"></div>
        <div class="box" id="box-44"></div>
        <div class="box" id="box-45"></div>
        <div class="box" id="box-46"></div>
        <div class="box" id="box-47"></div>
        <div class="box" id="box-48"></div>
        <div class="box" id="box-50"></div>
        <div class="box" id="box-51"></div>
        <div class="box" id="box-52"></div>
        <div class="box" id="box-53"></div>
        <div class="box" id="box-54"></div>
        <div class="box" id="box-55"></div>
        <div class="box" id="box-56"></div>
        <div class="box" id="box-57"></div>
        <div class="box" id="box-58"></div>
        <div class="box" id="box-60"></div>
        <div class="box" id="box-61"></div>
        <div class="box" id="box-62"></div>
        <div class="box" id="box-63"></div>
        <div class="box" id="box-64"></div>
        <div class="box" id="box-65"></div>
        <div class="box" id="box-66"></div>
        <div class="box" id="box-67"></div>
        <div class="box" id="box-68"></div>
        <div class="box" id="box-70"></div>
        <div class="box" id="box-71"></div>
        <div class="box" id="box-72"></div>
        <div class="box" id="box-73"></div>
        <div class="box" id="box-74"></div>
        <div class="box" id="box-75"></div>
        <div class="box" id="box-76"></div>
        <div class="box" id="box-77"></div>
        <div class="box" id="box-78"></div>
        <div class="box" id="box-80"></div>
        <div class="box" id="box-81"></div>
        <div class="box" id="box-82"></div>
        <div class="box" id="box-83"></div>
        <div class="box" id="box-84"></div>
        <div class="box" id="box-85"></div>
        <div class="box" id="box-86"></div>
        <div class="box" id="box-87"></div>
        <div class="box" id="box-88"></div>
    </div>
    
</body>
</html>

